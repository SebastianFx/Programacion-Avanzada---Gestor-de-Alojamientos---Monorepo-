{"openapi":"3.1.0","info":{"title":"Sistema de Gestión de Alojamientos API","description":"API REST para la gestión completa de alojamientos, reservas y comentarios. Permite a usuarios buscar y reservar alojamientos, a anfitriones gestionar sus propiedades, y a administradores supervisar el sistema.","contact":{"name":"Adriaann Mauricio Rodriguez Rubiano - Juan Sebastian Sachez Alvarez","email":"adriaannm.rodriguezr@uqvirtual.edu.co"},"license":{"name":"MIT License","url":"https://opensource.org/licenses/MIT"},"version":"1.0.0"},"servers":[{"url":"http://localhost:8080","description":"Servidor de Desarrollo"}],"tags":[{"name":"Favoritos","description":"Gestión de alojamientos favoritos del usuario"},{"name":"Autenticación","description":"Endpoints para login y registro de usuarios"},{"name":"Público","description":"Endpoints públicos para visitantes no autenticados"},{"name":"Reservas","description":"Gestión de reservas de usuario"},{"name":"Administración","description":"Operaciones exclusivas para administradores del sistema"},{"name":"Anfitrión","description":"Operaciones específicas para anfitriones"},{"name":"Comentarios Usuario","description":"Comentarios y calificaciones de huéspedes"},{"name":"Alojamientos","description":"Gestión de alojamientos por anfitriones"},{"name":"Usuario","description":"Operaciones para usuarios autenticados"}],"paths":{"/api/usuario/reservas/{id}/cancelar":{"put":{"tags":["Reservas"],"summary":"Cancelar reserva","description":"HU-U006: Cancelación con validación de 48 horas y políticas de reembolso","operationId":"cancelarReserva","parameters":[{"name":"id","in":"path","description":"ID de la reserva a cancelar","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"motivo","in":"query","description":"Motivo de la cancelación","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"Reserva cancelada exitosamente","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"400":{"description":"No se puede cancelar","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"404":{"description":"Reserva no encontrada","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"403":{"description":"No tienes permiso para cancelar esta reserva","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/usuario/perfil":{"get":{"tags":["Usuario"],"summary":"Ver perfil de usuario","description":"HU-U009: Información del perfil propio","operationId":"verPerfil","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]},"put":{"tags":["Usuario"],"summary":"Editar perfil de usuario","description":"HU-U009: Actualizar información personal (excepto email)","operationId":"editarPerfil","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UsuarioUpdateDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/usuario/cambiar-password":{"put":{"tags":["Usuario"],"summary":"Cambiar contraseña","description":"HU-U010: Cambiar contraseña voluntariamente","operationId":"cambiarPassword","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CambiarPasswordDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/anfitrion/alojamientos/{id}/estado":{"put":{"tags":["Alojamientos"],"summary":"Activar/Inactivar alojamiento","description":"HU-A002: Cambiar estado de alojamiento temporalmente","operationId":"cambiarEstado","parameters":[{"name":"id","in":"path","description":"ID del alojamiento","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"estado","in":"query","description":"Nuevo estado: ACTIVO, INACTIVO","required":true,"schema":{"type":"string"}},{"name":"motivo","in":"query","description":"Motivo del cambio de estado","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"Estado actualizado exitosamente","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"404":{"description":"Alojamiento no encontrado o no te pertenece","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"409":{"description":"Conflicto: No se puede inactivar con reservas futuras","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"400":{"description":"Estado inválido proporcionado","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"403":{"description":"No tienes permiso para realizar esta acción","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/anfitrion/alojamientos/{alojamientoId}":{"put":{"tags":["Alojamientos"],"summary":"Editar alojamiento","description":"HU-A002: Actualizar información de alojamiento propio","operationId":"actualizarAlojamiento","parameters":[{"name":"alojamientoId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlojamientoUpdateDTO"}}},"required":true},"responses":{"200":{"description":"Alojamiento actualizado exitosamente","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"404":{"description":"Alojamiento no encontrado","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"403":{"description":"No tienes permiso para editar este alojamiento","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]},"delete":{"tags":["Alojamientos"],"summary":"Eliminar alojamiento","description":"HU-A002: Eliminación lógica si NO hay reservas futuras","operationId":"eliminarAlojamiento","parameters":[{"name":"alojamientoId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"confirmar","in":"query","description":"Confirmación requerida para eliminar","required":true,"schema":{"type":"boolean"}}],"responses":{"200":{"description":"Alojamiento eliminado exitosamente","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"404":{"description":"Alojamiento no encontrado","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"403":{"description":"No tienes permiso para eliminar","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"409":{"description":"Conflicto: El alojamiento tiene reservas futuras","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/admin/usuarios/{id}/rol":{"put":{"tags":["Administración"],"summary":"Cambiar rol de usuario","description":"HU-AD001: Cambiar rol entre USUARIO y ANFITRION con aprobación","operationId":"cambiarRolUsuario","parameters":[{"name":"id","in":"path","description":"ID del usuario","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"nuevoRol","in":"query","description":"Nuevo rol: USUARIO, ANFITRION","required":true,"schema":{"type":"string"}},{"name":"motivo","in":"query","description":"Motivo del cambio de rol","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Rol actualizado exitosamente","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"404":{"description":"Usuario no encontrado","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"400":{"description":"Rol inválido o cambio no permitido","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"409":{"description":"No se puede cambiar rol de administrador","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/admin/usuarios/{id}/estado":{"put":{"tags":["Administración"],"summary":"Activar/Desactivar usuario","description":"HU-AD001: Cambiar estado de cuenta de usuario con justificación","operationId":"cambiarEstadoUsuario","parameters":[{"name":"id","in":"path","description":"ID del usuario","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"estado","in":"query","description":"Nuevo estado: ACTIVO, INACTIVO","required":true,"schema":{"type":"string"}},{"name":"justificacion","in":"query","description":"Justificación del cambio (obligatoria para desactivación)","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Estado actualizado exitosamente","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"404":{"description":"Usuario no encontrado","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"400":{"description":"Justificación requerida para desactivación","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"409":{"description":"No se puede desactivar a otro administrador","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/usuario/reservas":{"get":{"tags":["Reservas"],"summary":"Ver historial de reservas","description":"HU-U007: Lista de reservas con filtros por estado y fechas","operationId":"historialReservas","parameters":[{"name":"estado","in":"query","description":"Filtro por estado: PENDIENTE, CONFIRMADA, CANCELADA, COMPLETADA","required":false,"schema":{"type":"string"}},{"name":"fechaDesde","in":"query","description":"Fecha desde (YYYY-MM-DD)","required":false,"schema":{"type":"string"}},{"name":"fechaHasta","in":"query","description":"Fecha hasta (YYYY-MM-DD)","required":false,"schema":{"type":"string"}},{"name":"page","in":"query","description":"Página (0-based)","required":false,"schema":{"type":"integer","format":"int32","default":0},"example":0},{"name":"size","in":"query","description":"Tamaño de página","required":false,"schema":{"type":"integer","format":"int32","default":10},"example":10}],"responses":{"200":{"description":"Historial obtenido exitosamente","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"401":{"description":"Usuario no autenticado","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]},"post":{"tags":["Reservas"],"summary":"Realizar nueva reserva","description":"HU-U005: Crear reserva validando disponibilidad y capacidad","operationId":"realizarReserva","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReservaCreateDTO"}}},"required":true},"responses":{"201":{"description":"Reserva creada exitosamente","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"400":{"description":"Datos inválidos o fechas no disponibles","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"409":{"description":"El alojamiento no está disponible en esas fechas","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"422":{"description":"Excede la capacidad máxima del alojamiento","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/usuario/favoritos/{alojamientoId}":{"post":{"tags":["Favoritos"],"summary":"Añadir un alojamiento a favoritos","operationId":"agregarFavorito","parameters":[{"name":"alojamientoId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}}}},"security":[{"Bearer Authentication":[]}]},"delete":{"tags":["Favoritos"],"summary":"Quitar un alojamiento de favoritos","operationId":"quitarFavorito","parameters":[{"name":"alojamientoId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/usuario/convertir-anfitrion":{"post":{"tags":["Usuario"],"summary":"Convertirse en anfitrión","description":"HU-U011: Cambio automático de rol de USUARIO a ANFITRION","operationId":"convertirAnfitrion","responses":{"200":{"description":"Rol actualizado exitosamente","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"400":{"description":"Usuario ya es anfitrión o no cumple requisitos","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"401":{"description":"Usuario no autenticado","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/usuario/comentarios":{"post":{"tags":["Comentarios Usuario"],"summary":"Dejar comentario y calificación","description":"HU-U008: Comentar y calificar reserva completada (solo una vez por reserva)","operationId":"dejarComentario","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ComentarioCreateDTO"}}},"required":true},"responses":{"201":{"description":"Comentario creado exitosamente","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"400":{"description":"Calificación inválida (debe ser 1-5) o comentario muy largo","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"404":{"description":"Reserva no encontrada","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"409":{"description":"Ya comentaste esta reserva o reserva no completada","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"422":{"description":"Solo puedes comentar reservas completadas","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/auth/register":{"post":{"tags":["Autenticación"],"summary":"Registrar nuevo usuario","description":"Crea una nueva cuenta de usuario en el sistema","operationId":"register","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UsuarioCreateDTO"}}},"required":true},"responses":{"201":{"description":"Usuario registrado exitosamente","content":{"*/*":{"schema":{"type":"object"}}}},"400":{"description":"Datos inválidos o email ya existe","content":{"*/*":{"schema":{"type":"object"}}}},"500":{"description":"Error interno del servidor","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/auth/login":{"post":{"tags":["Autenticación"],"summary":"Iniciar sesión","description":"Autentica un usuario con email y contraseña, retornando un token JWT","operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequestDTO"}}},"required":true},"responses":{"200":{"description":"Login exitoso","content":{"*/*":{"schema":{"type":"object"}}}},"401":{"description":"Credenciales inválidas","content":{"*/*":{"schema":{"type":"object"}}}},"400":{"description":"Datos de entrada inválidos","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/anfitrion/comentarios/{comentarioId}/responder":{"post":{"tags":["Anfitrión"],"summary":"Responder a un comentario","description":"HU-A004: Responder comentarios de huéspedes (máximo 300 caracteres)","operationId":"responderComentario","parameters":[{"name":"comentarioId","in":"path","description":"ID del comentario a responder","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"respuesta","in":"query","description":"Respuesta al comentario (máximo 300 caracteres)","required":true,"schema":{"type":"string"}}],"responses":{"201":{"description":"Respuesta creada exitosamente","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"400":{"description":"Respuesta muy larga (máximo 300 caracteres)","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"404":{"description":"Comentario no encontrado","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"409":{"description":"Ya respondiste este comentario o no es de tu alojamiento","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/anfitrion/alojamientos":{"get":{"tags":["Alojamientos"],"summary":"Gestionar mis alojamientos","description":"HU-A002: Ver lista de todos mis alojamientos con métricas básicas","operationId":"gestionarMisAlojamientos","parameters":[{"name":"estado","in":"query","description":"Filtro por estado: ACTIVO, INACTIVO, ELIMINADO","required":false,"schema":{"type":"string"}},{"name":"page","in":"query","description":"Página (0-based)","required":false,"schema":{"type":"integer","format":"int32","default":0},"example":0},{"name":"size","in":"query","description":"Tamaño de página","required":false,"schema":{"type":"integer","format":"int32","default":10},"example":10}],"responses":{"200":{"description":"Lista obtenida exitosamente","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]},"post":{"tags":["Alojamientos"],"summary":"Crear nuevo alojamiento","description":"HU-A001: Crear alojamiento con información completa, servicios e imágenes","operationId":"crearAlojamiento","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlojamientoCreateDTO"}}},"required":true},"responses":{"201":{"description":"Alojamiento creado exitosamente","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"400":{"description":"Datos inválidos (precio <=0, capacidad <=0)","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"401":{"description":"Usuario no autenticado","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"403":{"description":"Usuario no es anfitrión","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/anfitrion/alojamientos/{id}/imagenes":{"post":{"tags":["Alojamientos"],"summary":"Subir imágenes del alojamiento","description":"Subir entre 1 y 10 imágenes, marcar una como principal","operationId":"subirImagenes","parameters":[{"name":"id","in":"path","description":"ID del alojamiento","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"urlImagenes","in":"query","description":"URLs de las imágenes separadas por coma","required":true,"schema":{"type":"string"}},{"name":"imagenPrincipal","in":"query","description":"Índice de la imagen principal (0-based)","required":false,"schema":{"type":"integer","format":"int32","default":0},"example":0}],"responses":{"201":{"description":"Imágenes subidas exitosamente","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"400":{"description":"Formato de imagen inválido o excede límite de 10","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"404":{"description":"Alojamiento no encontrado","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/anfitrion/alojamientos/{id}/fotos":{"post":{"tags":["Alojamientos"],"summary":"Subir foto del alojamiento","description":"Subir una imagen para el alojamiento (acepta base64 o URL)","operationId":"subirFoto","parameters":[{"name":"id","in":"path","description":"ID del alojamiento","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"imagenUrl","in":"query","description":"URL o datos base64 de la imagen","required":true,"schema":{"type":"string"}},{"name":"esPrincipal","in":"query","description":"Marcar como imagen principal","required":false,"schema":{"type":"boolean","default":true}}],"responses":{"201":{"description":"Foto subida exitosamente","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"400":{"description":"Formato de imagen inválido","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"404":{"description":"Alojamiento no encontrado","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"403":{"description":"No tienes permiso para subir fotos a este alojamiento","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/usuario/reservas/{id}":{"get":{"tags":["Reservas"],"summary":"Ver detalles de reserva específica","operationId":"detalleReserva","parameters":[{"name":"id","in":"path","description":"ID de la reserva","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/usuario/favoritos":{"get":{"tags":["Favoritos"],"summary":"Ver mi lista de alojamientos favoritos","operationId":"listarFavoritos","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/usuario/dashboard":{"get":{"tags":["Usuario"],"summary":"Dashboard de usuario","description":"Resumen de actividad del usuario: reservas recientes, favoritos, etc.","operationId":"dashboard","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/usuario/comentarios/pendientes":{"get":{"tags":["Comentarios Usuario"],"summary":"Ver reservas pendientes de comentar","description":"Lista de reservas completadas que aún no tienen comentario","operationId":"reservasPendientesComentario","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/usuario/comentarios/mis-comentarios":{"get":{"tags":["Comentarios Usuario"],"summary":"Ver mis comentarios realizados","description":"Lista de todos los comentarios que he hecho en mis reservas","operationId":"misComentarios","parameters":[{"name":"page","in":"query","description":"Página (0-based)","required":false,"schema":{"type":"integer","format":"int32","default":0},"example":0},{"name":"size","in":"query","description":"Tamaño de página","required":false,"schema":{"type":"integer","format":"int32","default":10},"example":10}],"responses":{"200":{"description":"Lista obtenida exitosamente","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"401":{"description":"Usuario no autenticado","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/usuario/comentarios/alojamiento/{alojamientoId}":{"get":{"tags":["Comentarios Usuario"],"summary":"Ver comentarios de un alojamiento específico","description":"Lista todos los comentarios públicos de un alojamiento","operationId":"verComentariosAlojamiento","parameters":[{"name":"alojamientoId","in":"path","description":"ID del alojamiento","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"ordenarPor","in":"query","description":"Ordenar por: fecha, calificacion","required":false,"schema":{"type":"string","default":"fecha"},"example":"fecha"},{"name":"direccion","in":"query","description":"Dirección: asc, desc","required":false,"schema":{"type":"string","default":"desc"},"example":"desc"},{"name":"page","in":"query","description":"Página (0-based)","required":false,"schema":{"type":"integer","format":"int32","default":0},"example":0},{"name":"size","in":"query","description":"Tamaño de página","required":false,"schema":{"type":"integer","format":"int32","default":5},"example":5}],"responses":{"200":{"description":"Comentarios obtenidos exitosamente","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"404":{"description":"Alojamiento no encontrado","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/usuario/alojamientos":{"get":{"tags":["Usuario"],"summary":"Buscar alojamientos","description":"HU-U003: Búsqueda de alojamientos con filtros...","operationId":"buscarAlojamientos","parameters":[{"name":"filtros","in":"query","required":true,"schema":{"$ref":"#/components/schemas/BusquedaAlojamientosDTO"}}],"responses":{"200":{"description":"Búsqueda realizada exitosamente","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AlojamientoSummaryDTO"}}}}},"400":{"description":"Filtros inválidos","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AlojamientoSummaryDTO"}}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/usuario/alojamientos/{id}":{"get":{"tags":["Usuario"],"summary":"Ver detalles completos de alojamiento","description":"HU-U004: Galería, descripción, servicios, mapa, calendario, comentarios","operationId":"detalleAlojamiento","parameters":[{"name":"id","in":"path","description":"ID del alojamiento","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Detalles obtenidos exitosamente","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"404":{"description":"Alojamiento no encontrado","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"401":{"description":"Usuario no autenticado","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/public/statistics":{"get":{"tags":["Público"],"summary":"Obtener estadísticas de la plataforma","description":"Retorna estadísticas generales: alojamientos, usuarios, ciudades, reservas","operationId":"obtenerEstadisticas","responses":{"200":{"description":"Estadísticas obtenidas exitosamente","content":{"*/*":{"schema":{"type":"object"}}}},"500":{"description":"Error interno del servidor","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/public/cities":{"get":{"tags":["Público"],"summary":"Obtener ciudades disponibles","description":"Retorna lista de ciudades con cantidad de alojamientos disponibles","operationId":"obtenerCiudades","responses":{"200":{"description":"Ciudades obtenidas exitosamente","content":{"*/*":{"schema":{"type":"object"}}}},"500":{"description":"Error interno del servidor","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/public/alojamientos":{"get":{"tags":["Público"],"summary":"Listar todos los alojamientos activos","description":"Retorna lista completa de alojamientos activos disponibles para reservar","operationId":"listarAlojamientos","responses":{"200":{"description":"Alojamientos obtenidos exitosamente","content":{"*/*":{"schema":{"type":"object"}}}},"500":{"description":"Error interno del servidor","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/public/accommodations/featured":{"get":{"tags":["Público"],"summary":"Obtener alojamientos destacados","description":"Retorna hasta 6 alojamientos destacados para mostrar en la página principal","operationId":"obtenerAlojamientosDestacados","responses":{"200":{"description":"Alojamientos obtenidos exitosamente","content":{"*/*":{"schema":{"type":"object"}}}},"500":{"description":"Error interno del servidor","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/auth/validate":{"get":{"tags":["Autenticación"],"summary":"Validar token JWT","description":"Verifica si el token JWT es válido","operationId":"validateToken","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/anfitrion/reservas":{"get":{"tags":["Anfitrión"],"summary":"Ver reservas de mis alojamientos","description":"HU-A003: Lista de todas las reservas de todos mis alojamientos","operationId":"verReservasMisAlojamientos","parameters":[{"name":"alojamientoId","in":"query","description":"Filtrar por alojamiento específico","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"estado","in":"query","description":"Filtro por estado: PENDIENTE, CONFIRMADA, CANCELADA, COMPLETADA","required":false,"schema":{"type":"string"}},{"name":"fechaDesde","in":"query","description":"Fecha desde (YYYY-MM-DD)","required":false,"schema":{"type":"string"}},{"name":"fechaHasta","in":"query","description":"Fecha hasta (YYYY-MM-DD)","required":false,"schema":{"type":"string"}},{"name":"page","in":"query","description":"Página (0-based)","required":false,"schema":{"type":"integer","format":"int32","default":0},"example":0},{"name":"size","in":"query","description":"Tamaño de página","required":false,"schema":{"type":"integer","format":"int32","default":10},"example":10}],"responses":{"200":{"description":"Reservas obtenidas exitosamente","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"401":{"description":"Usuario no autenticado","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"403":{"description":"Usuario no es anfitrión","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/anfitrion/perfil":{"get":{"tags":["Anfitrión"],"summary":"Ver perfil como anfitrión","description":"Información específica del perfil de anfitrión","operationId":"verPerfilAnfitrion","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/anfitrion/metricas":{"get":{"tags":["Anfitrión"],"summary":"Ver métricas de mis alojamientos","description":"Estadísticas detalladas de ocupación, ingresos y calificaciones","operationId":"verMetricas","parameters":[{"name":"periodo","in":"query","description":"Período: mes, trimestre, año","required":false,"schema":{"type":"string","default":"mes"},"example":"mes"},{"name":"alojamientoId","in":"query","description":"Filtrar por alojamiento específico","required":false,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/anfitrion/dashboard":{"get":{"tags":["Anfitrión"],"summary":"Dashboard del anfitrión","description":"Resumen de actividad: alojamientos, reservas, ingresos, métricas","operationId":"dashboard_1","responses":{"200":{"description":"Dashboard obtenido exitosamente","content":{"*/*":{"schema":{"type":"object"}}}},"401":{"description":"Usuario no autenticado","content":{"*/*":{"schema":{"type":"object"}}}},"403":{"description":"Usuario no es anfitrión","content":{"*/*":{"schema":{"type":"object"}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/anfitrion/comentarios":{"get":{"tags":["Anfitrión"],"summary":"Ver comentarios de mis alojamientos","description":"HU-A004: Lista de comentarios recibidos en todos mis alojamientos","operationId":"verComentariosMisAlojamientos","parameters":[{"name":"alojamientoId","in":"query","description":"Filtrar por alojamiento específico","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"soloSinResponder","in":"query","description":"Solo comentarios sin responder","required":false,"schema":{"type":"boolean","default":false}},{"name":"page","in":"query","description":"Página (0-based)","required":false,"schema":{"type":"integer","format":"int32","default":0},"example":0},{"name":"size","in":"query","description":"Tamaño de página","required":false,"schema":{"type":"integer","format":"int32","default":10},"example":10}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/admin/usuarios":{"get":{"tags":["Administración"],"summary":"Gestionar usuarios","description":"HU-AD001: Lista, filtro y búsqueda de usuarios del sistema","operationId":"gestionarUsuarios","parameters":[{"name":"rol","in":"query","description":"Filtro por rol: USUARIO, ANFITRION, ADMINISTRADOR","required":false,"schema":{"type":"string"}},{"name":"estado","in":"query","description":"Filtro por estado: ACTIVO, INACTIVO","required":false,"schema":{"type":"string"}},{"name":"busqueda","in":"query","description":"Búsqueda por nombre, email o ID","required":false,"schema":{"type":"string"}},{"name":"page","in":"query","description":"Página (0-based)","required":false,"schema":{"type":"integer","format":"int32","default":0},"example":0},{"name":"size","in":"query","description":"Tamaño de página","required":false,"schema":{"type":"integer","format":"int32","default":20},"example":20}],"responses":{"200":{"description":"Lista de usuarios obtenida exitosamente","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"401":{"description":"Usuario no autenticado","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"403":{"description":"Usuario no es administrador","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/admin/usuarios/{id}":{"get":{"tags":["Administración"],"summary":"Ver detalles de usuario específico","description":"Información completa y historial de actividad de un usuario","operationId":"verDetalleUsuario","parameters":[{"name":"id","in":"path","description":"ID del usuario","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/admin/reportes":{"get":{"tags":["Administración"],"summary":"Generar reportes del sistema","description":"Reportes exportables en diferentes formatos","operationId":"generarReportes","parameters":[{"name":"tipo","in":"query","description":"Tipo: usuarios, alojamientos, reservas, ingresos","required":true,"schema":{"type":"string"}},{"name":"formato","in":"query","description":"Formato: PDF, EXCEL, CSV","required":false,"schema":{"type":"string","default":"PDF"},"example":"PDF"},{"name":"fechaDesde","in":"query","description":"Fecha desde (YYYY-MM-DD)","required":false,"schema":{"type":"string"}},{"name":"fechaHasta","in":"query","description":"Fecha hasta (YYYY-MM-DD)","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/admin/estadisticas":{"get":{"tags":["Administración"],"summary":"Estadísticas del sistema","description":"Estadísticas detalladas de usuarios, alojamientos, reservas y rendimiento","operationId":"verEstadisticas","parameters":[{"name":"periodo","in":"query","description":"Período: dia, semana, mes, año","required":false,"schema":{"type":"string","default":"mes"},"example":"mes"}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/admin/dashboard":{"get":{"tags":["Administración"],"summary":"Dashboard de administración","description":"Panel principal con estadísticas generales del sistema","operationId":"dashboard_2","responses":{"200":{"description":"Dashboard obtenido exitosamente","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"401":{"description":"Usuario no autenticado","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}},"403":{"description":"Usuario no es administrador","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/admin/auditoria":{"get":{"tags":["Administración"],"summary":"Ver auditoría del sistema","description":"Historial completo de acciones administrativas realizadas","operationId":"verAuditoria","parameters":[{"name":"administradorId","in":"query","description":"Filtro por administrador","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"accion","in":"query","description":"Filtro por acción: ACTIVAR, DESACTIVAR, CAMBIO_ROL","required":false,"schema":{"type":"string"}},{"name":"fechaDesde","in":"query","description":"Fecha desde (YYYY-MM-DD)","required":false,"schema":{"type":"string"}},{"name":"fechaHasta","in":"query","description":"Fecha hasta (YYYY-MM-DD)","required":false,"schema":{"type":"string"}},{"name":"page","in":"query","description":"Página (0-based)","required":false,"schema":{"type":"integer","format":"int32","default":0},"example":0},{"name":"size","in":"query","description":"Tamaño de página","required":false,"schema":{"type":"integer","format":"int32","default":20},"example":20}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{}}}}}},"security":[{"Bearer Authentication":[]}]}}},"components":{"schemas":{"UsuarioUpdateDTO":{"type":"object","description":"Datos para actualizar perfil de usuario","properties":{"nombre":{"type":"string","description":"Nombre completo del usuario","example":"Juan Pérez","maxLength":100,"minLength":2},"telefono":{"type":"string","description":"Número de teléfono","example":"+57300123456","maxLength":20,"pattern":"^[0-9+\\-\\s()]{10,20}$"},"fotoPerfil":{"type":"string","description":"URL de la foto de perfil","example":"juan.jpg","maxLength":500,"minLength":0}}},"CambiarPasswordDTO":{"type":"object","description":"Cambio voluntario de contraseña","properties":{"passwordActual":{"type":"string","description":"Contraseña actual","example":"PasswordActual123","minLength":1},"nuevaPassword":{"type":"string","description":"Nueva contraseña","example":"NuevaPassword123","minLength":1,"pattern":"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d).{8,}$"},"confirmarPassword":{"type":"string","description":"Confirmación de nueva contraseña","example":"NuevaPassword123","minLength":1}},"required":["confirmarPassword","nuevaPassword","passwordActual"]},"AlojamientoUpdateDTO":{"type":"object","description":"Datos para actualizar un alojamiento existente","properties":{"titulo":{"type":"string","description":"Título del alojamiento","example":"Casa Campestre La Calera","maxLength":200,"minLength":0},"descripcion":{"type":"string","description":"Descripción detallada","example":"Hermosa casa con vista panorámica","maxLength":2000,"minLength":0},"precioPorNoche":{"type":"number","description":"Precio por noche en COP","example":150000.0,"minimum":1.0},"capacidadMaxima":{"type":"integer","format":"int32","description":"Capacidad máxima","example":6,"minimum":1},"servicios":{"type":"array","description":"Servicios disponibles","example":["WiFi","Piscina","Parqueadero"],"items":{"type":"string"}}}},"ReservaCreateDTO":{"type":"object","description":"Datos para crear una nueva reserva","properties":{"alojamientoId":{"type":"integer","format":"int64","description":"ID del alojamiento a reservar","example":1},"fechaCheckIn":{"type":"string","format":"date","description":"Fecha de check-in","example":"2024-02-15"},"fechaCheckOut":{"type":"string","format":"date","description":"Fecha de check-out","example":"2024-02-17"},"numHuespedes":{"type":"integer","format":"int32","description":"Número de huéspedes","example":4,"minimum":1}},"required":["alojamientoId","fechaCheckIn","fechaCheckOut","numHuespedes"]},"ComentarioCreateDTO":{"type":"object","description":"Datos para crear un comentario","properties":{"reservaId":{"type":"integer","format":"int64","description":"ID de la reserva completada","example":1},"calificacion":{"type":"integer","format":"int32","description":"Calificación de 1 a 5 estrellas","example":5,"maximum":5,"minimum":1},"comentario":{"type":"string","description":"Comentario opcional","example":"Excelente lugar, muy recomendado","maxLength":500,"minLength":0}},"required":["calificacion","reservaId"]},"UsuarioCreateDTO":{"type":"object","description":"Datos para registrar un nuevo usuario","properties":{"nombre":{"type":"string","description":"Nombre completo del usuario","example":"Juan Pérez","maxLength":100,"minLength":2},"apellido":{"type":"string","maxLength":50,"minLength":2},"email":{"type":"string","format":"email","description":"Email único del usuario","example":"juan.perez@email.com","maxLength":150,"minLength":0},"password":{"type":"string","description":"Contraseña (mínimo 8 caracteres con mayúsculas y números)","example":"MiPassword123","minLength":1,"pattern":"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d).{8,}$"},"telefono":{"type":"string","description":"Número de teléfono","example":"+57300123456","maxLength":20,"pattern":"^[0-9+\\-\\s()]{10,20}$"},"fechaNacimiento":{"type":"string","format":"date","description":"Fecha de nacimiento","example":"1990-05-15"},"fotoPerfil":{"type":"string"},"rol":{"type":"string"}},"required":["apellido","email","fechaNacimiento","nombre","password"]},"LoginRequestDTO":{"type":"object","description":"Datos para iniciar sesión","properties":{"email":{"type":"string","format":"email","description":"Email del usuario","example":"juan.perez@email.com","minLength":1},"password":{"type":"string","description":"Contraseña","example":"MiPassword123","minLength":1}},"required":["email","password"]},"AlojamientoCreateDTO":{"type":"object","description":"Datos para crear un nuevo alojamiento","properties":{"titulo":{"type":"string","description":"Título del alojamiento","example":"Casa Campestre La Calera","maxLength":200,"minLength":0},"descripcion":{"type":"string","description":"Descripción detallada del alojamiento","example":"Hermosa casa con vista panorámica a los cerros orientales","maxLength":2000,"minLength":0},"ciudad":{"type":"string","description":"Ciudad donde se ubica","example":"La Calera","maxLength":100,"minLength":0},"direccionCompleta":{"type":"string","description":"Dirección completa","example":"Vereda Alto del Águila, Km 2","maxLength":500,"minLength":0},"precioPorNoche":{"type":"number","description":"Precio por noche en COP","example":150000.0,"minimum":1.0},"capacidadMaxima":{"type":"integer","format":"int32","description":"Capacidad máxima de huéspedes","example":6,"minimum":1},"tipo":{"type":"string","description":"Tipo de alojamiento","enum":["CASA","APARTAMENTO","FINCA"],"example":"CASA"},"servicios":{"type":"array","items":{"description":"Lista de servicios disponibles","example":"WiFi"},"maxItems":20,"minItems":0}},"required":["capacidadMaxima","ciudad","descripcion","direccionCompleta","precioPorNoche","tipo","titulo"]},"BusquedaAlojamientosDTO":{"type":"object","description":"Parámetros de búsqueda de alojamientos","properties":{"ciudad":{"type":"string","description":"Ciudad","example":"Bogotá"},"fechaCheckIn":{"type":"string","format":"date","description":"Fecha de check-in","example":"2024-02-15"},"fechaCheckOut":{"type":"string","format":"date","description":"Fecha de check-out","example":"2024-02-17"},"precioMin":{"type":"number","description":"Precio mínimo","example":50000},"precioMax":{"type":"number","description":"Precio máximo","example":200000},"tipo":{"type":"string","description":"Tipo de alojamiento","enum":["CASA","APARTAMENTO","FINCA"],"example":"CASA"},"huespedes":{"type":"integer","format":"int32","description":"Número de huéspedes","example":4,"minimum":1},"servicios":{"type":"array","description":"Servicios requeridos","example":["WiFi","Piscina"],"items":{"type":"string"}},"ordenarPor":{"type":"string","description":"Ordenar por","enum":["precio","calificacion","fecha"],"example":"precio"},"direccion":{"type":"string","description":"Dirección","enum":["asc","desc"],"example":"asc"}}},"AlojamientoSummaryDTO":{"type":"object","description":"Información resumida del alojamiento para listas","properties":{"id":{"type":"integer","format":"int64","description":"ID del alojamiento","example":1},"titulo":{"type":"string","description":"Título","example":"Casa Campestre La Calera"},"descripcion":{"type":"string","description":"Descripción","example":"Hermosa casa campestre con vista panorámica"},"ciudad":{"type":"string","description":"Ciudad","example":"La Calera"},"precioPorNoche":{"type":"number","description":"Precio por noche","example":150000.0},"capacidadMaxima":{"type":"integer","format":"int32","description":"Capacidad máxima","example":6},"tipo":{"type":"string","description":"Tipo","enum":["CASA","APARTAMENTO","FINCA"],"example":"CASA"},"servicios":{"type":"array","description":"Servicios disponibles","example":["WiFi","Piscina","Parqueadero"],"items":{"type":"string"}},"imagenPrincipal":{"type":"string","description":"Imagen principal","example":"casa1.jpg"},"calificacionPromedio":{"type":"number","format":"double","description":"Calificación promedio","example":4.5},"estado":{"type":"string","description":"Estado","enum":["ACTIVO","INACTIVO","ELIMINADO"],"example":"ACTIVO"},"totalReservas":{"type":"integer","format":"int32","description":"Total de reservas","example":15}}}},"securitySchemes":{"Bearer Authentication":{"type":"http","description":"Ingresa tu token JWT para autenticarte","scheme":"bearer","bearerFormat":"JWT"}}}}