@use '../../../../styles/variables' as vars;

:host {
  display: block;
  width: 100%;
}

mat-form-field {
  width: 100%;

  ::ng-deep {
    .mat-mdc-text-field-wrapper {
      transition: vars.$transition-base;
    }

    .mat-mdc-form-field-focus-overlay {
      background-color: transparent;
    }

    .mat-mdc-form-field-subscript-wrapper {
      margin-top: 0.25rem;
    }

    // Estilos para el outline (borde)
    .mdc-text-field--outlined {
      // Estado normal
      .mdc-notched-outline {
        .mdc-notched-outline__leading,
        .mdc-notched-outline__notch,
        .mdc-notched-outline__trailing {
          border-color: vars.$color-gray-light;
          transition: vars.$transition-base;
        }
      }

      // Estado hover
      &:hover:not(.mdc-text-field--focused):not(.mdc-text-field--disabled) {
        .mdc-notched-outline {
          .mdc-notched-outline__leading,
          .mdc-notched-outline__notch,
          .mdc-notched-outline__trailing {
            border-color: vars.$color-secondary;
            box-shadow: 0 0 0 1px rgba(191, 151, 101, 0.2);
          }
        }
      }

      // Estado focus
      &.mdc-text-field--focused {
        .mdc-notched-outline {
          .mdc-notched-outline__leading,
          .mdc-notched-outline__notch,
          .mdc-notched-outline__trailing {
            border-color: vars.$color-primary !important;
            border-width: 2px;
            box-shadow: 0 0 0 3px rgba(217, 183, 119, 0.15);
          }
        }

        // Label en focus
        .mdc-floating-label--float-above {
          color: vars.$color-primary !important;
        }
      }

      // Estado error
      &.mdc-text-field--invalid {
        .mdc-notched-outline {
          .mdc-notched-outline__leading,
          .mdc-notched-outline__notch,
          .mdc-notched-outline__trailing {
            border-color: vars.$color-error !important;
          }
        }

        &:hover {
          .mdc-notched-outline {
            .mdc-notched-outline__leading,
            .mdc-notched-outline__notch,
            .mdc-notched-outline__trailing {
              box-shadow: 0 0 0 1px rgba(178, 34, 34, 0.2);
            }
          }
        }
      }
    }

    // Estilos del label
    .mdc-floating-label {
      color: vars.$color-gray-medium;
      transition: vars.$transition-base;
      font-weight: 500;
    }

    // Mensajes de error
    .mat-mdc-form-field-error {
      color: vars.$color-error;
      font-size: 0.75rem;
      font-weight: 500;
      margin-top: 0.25rem;
      animation: errorShake 0.3s ease;
    }

    @keyframes errorShake {
      0%,
      100% {
        transform: translateX(0);
      }
      25% {
        transform: translateX(-4px);
      }
      75% {
        transform: translateX(4px);
      }
    }

    // Íconos
    .mat-icon {
      transition: vars.$transition-base;
      color: vars.$color-gray-medium;
    }

    // Input text
    input {
      transition: vars.$transition-base;
      color: vars.$color-text-primary;
      font-weight: 500;

      &::placeholder {
        color: vars.$color-gray-medium;
        opacity: 0.7;
      }

      &:focus {
        color: vars.$color-text-dark;
      }
    }

    // Botón de sufijo (para mostrar/ocultar contraseña)
    .mat-mdc-icon-button {
      &:hover {
        .mat-icon {
          color: vars.$color-primary;
          transform: scale(1.1);
        }
      }
    }
  }
}

// Efecto de brillo sutil al hacer focus
:host-context(.mat-focused) {
  mat-form-field::ng-deep {
    .mat-icon {
      color: vars.$color-primary;
    }
  }
}
