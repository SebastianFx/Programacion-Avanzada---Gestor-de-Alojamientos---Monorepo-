@if (isOpen && alojamiento) {
  <div class="modal-overlay" (click)="closeModal()">
    <div class="modal-container" (click)="onModalContentClick($event)">
      <!-- Header -->
      <div class="modal-header">
        <h2 class="modal-title">{{ alojamiento.titulo }}</h2>
        <button class="modal-close" (click)="closeModal()" aria-label="Cerrar modal">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>

      <!-- Content -->
      <div class="modal-content">
        <!-- Imagen Principal -->
        @if (alojamiento.imagenPrincipal) {
          <div class="modal-image">
            <img [src]="alojamiento.imagenPrincipal" [alt]="alojamiento.titulo" />
          </div>
        } @else {
          <div class="modal-image-placeholder">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
              <polyline points="9 22 9 12 15 12 15 22"/>
            </svg>
            <p>Sin imagen</p>
          </div>
        }

        <!-- Información Principal -->
        <div class="modal-info">
          <div class="info-row">
            <div class="info-item">
              <svg class="info-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                <circle cx="12" cy="10" r="3"/>
              </svg>
              <span>{{ alojamiento.ciudad }}</span>
            </div>

            <div class="info-item">
              <svg class="info-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                <circle cx="9" cy="7" r="4"/>
                <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
              </svg>
              <span>{{ alojamiento.capacidadMaxima }} personas</span>
            </div>

            <div class="info-item">
              <svg class="info-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
              </svg>
              <span>{{ alojamiento.tipo }}</span>
            </div>
          </div>

          <div class="price-section">
            <span class="price-label">Precio por noche</span>
            <span class="price-amount">{{ alojamiento.precioPorNoche | currency: 'COP':'symbol-narrow':'1.0-0' }}</span>
          </div>
        </div>

        <!-- Descripción -->
        <div class="modal-description">
          <h3>Descripción</h3>
          <p>{{ alojamiento.descripcion || 'No hay descripción disponible' }}</p>
        </div>

        <!-- Servicios -->
        @if (alojamiento.servicios && alojamiento.servicios.length > 0) {
          <div class="modal-servicios">
            <h3>Servicios</h3>
            <div class="servicios-grid">
              @for (servicio of alojamiento.servicios; track servicio) {
                <div class="servicio-item">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="20 6 9 17 4 12"/>
                  </svg>
                  <span>{{ servicio }}</span>
                </div>
              }
            </div>
          </div>
        }

        <!-- Estadísticas -->
        @if (alojamiento.calificacionPromedio) {
          <div class="modal-stats">
            <div class="stat-item">
              <span class="stat-label">Calificación</span>
              <span class="stat-value">⭐ {{ alojamiento.calificacionPromedio }}/5</span>
            </div>
            @if (alojamiento.totalReservas) {
              <div class="stat-item">
                <span class="stat-label">Reservas</span>
                <span class="stat-value">{{ alojamiento.totalReservas }} reservas</span>
              </div>
            }
          </div>
        }
      </div>

      <!-- Footer -->
      <div class="modal-footer">
        <button class="btn btn--secondary" (click)="closeModal()">
          Cerrar
        </button>
        <button class="btn btn--primary">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
            <line x1="16" y1="2" x2="16" y2="6"/>
            <line x1="8" y1="2" x2="8" y2="6"/>
            <line x1="3" y1="10" x2="21" y2="10"/>
          </svg>
          Reservar Ahora
        </button>
      </div>
    </div>
  </div>
}
